function showPosition(){var a=$overlayContent[0].outerHTML;Odelay.open(a)}function setAboutHeights(){$("#about .row").css("height",window.innerHeight-45)}function setSectionHeights(){$("section").css("minHeight",window.innerHeight-195)}function logWindowWidth(){windowWidth=window.innerWidth}function animateThisSVG(obj,name){function animate(el,state){el.animate({d:state.d},state.time,eval(state.easing))}if(obj){var container=Snap.select(obj[name].topLevelSelector);if(windowWidth>479)var animatedEls=obj[name]["animatedEls-full"];else var animatedEls=obj[name]["animatedEls-mobile"];for(i in animatedEls){var el=container.select(animatedEls[i].selector);for(j in animatedEls[i].states){var state=animatedEls[i].states[j];setTimeout(animate,state.delay,el,state)}}}}function filters(a){var b=$('.filter [data-filter="'+a+'"]');if(Odelay.close(),"off"===b.attr("data-toggle")){if("cancer-type"===b.data("filter-type")){$('[data-filter-type="cancer-type"] a').data("toggle","off").attr("data-toggle","off");var c=b.data("filter");$("#chapters > div,#support-the-cause > div").removeClass("open"),$("#chapters").find(".part2,.expand").removeClass("open"),$("#chapters [data-cancer-type="+c+"],#support-the-cause [data-cancer-type="+c+"]").addClass("open"),$("#support-blurb").hide(),$("#positions").addClass("chapter");var d=$("#positions > div");d.hide(),d=d.sort(function(a,b){var c=parseFloat(a.getAttribute("data-chapter-index")),d=parseFloat(b.getAttribute("data-chapter-index"));return c>d?1:d>c?-1:0}),d.filter("[data-chapter-float]").each(function(){if($(this).attr("data-cancer-type")===c){var a=$(this).attr("data-chapter-float");$(this).css("float",a)}}),d.filter("[data-chapter-full-size]").each(function(){$(this).css({width:containerWidth,height:containerWidth/2-10})}),d.detach().appendTo($positions),$("#positions > [data-cancer-type="+c+"]").show(),window.scrollTo(0,0)}b.data("toggle","on").attr("data-toggle","on")}else if(b.data("toggle","off").attr("data-toggle","off"),"cancer-type"===b.data("filter-type")){var d=$("#positions > div");d.hide(),d.sort(function(a,b){var c=parseFloat(a.getAttribute("data-index")),d=parseFloat(b.getAttribute("data-index"));return c>d?1:d>c?-1:0}),d.filter("[data-chapter-float]").css("float",""),setPositionSize(),d.detach().appendTo($positions),$("#chapters > div,#support-the-cause > div").removeClass("open"),$("#chapters").find(".part2,.expand").removeClass("open"),$("#support-blurb").show(),$("#positions").removeClass("chapter"),window.scrollTo(0,0)}}function clearFilters(){var a=$("#positions > div");$(".filters [data-toggle=on]").attr("data-toggle","off"),$("#chapters > div,#support-the-cause > div").removeClass("open"),$("#chapters").find(".part2,.expand").removeClass("open"),$("#support-blurb").show(),$("#positions").removeClass("chapter"),a.filter("[data-chapter-float]").css("float",""),setPositionSize(),a.hide(),a.sort(function(a,b){var c=parseFloat(a.getAttribute("data-index")),d=parseFloat(b.getAttribute("data-index"));return c>d?1:d>c?-1:0}),a.detach().appendTo($positions).show(),window.scrollTo(0,0)}function loadPositionsJSON(a,b){var c=Mustache.to_html($("#templates .positions").html(),{positions:positionsData});$("#positions").html(c).removeClass("empty"),$positionsContainer.show(),loadPositionsState(a,b)}function loadAboutAnimations(){$.getJSON("data/animations-about.json",function(a){aboutAnimations=a;for(var b in a){if(windowWidth>479)var c=a[b]["file-full"];else var c=a[b]["file-mobile"];console.log(c),Snap.load(c,function(a){return function(b){var c=Snap("#about ."+a);c.append(b)}}(b))}setTimeout(function(){animateThisSVG(aboutAnimations,"one")},800)})}var Odelay={open:function(a){var b='<div id="close">&#215;</div>';$overlay.html(a+b).addClass("open"),$wrapper.addClass("overlay-open"),$body.addClass("noscroll"),$overlay.on("click","#close",function(){Odelay.close()}),Mousetrap.bind("esc",function(){Odelay.close()}),$wrapper.on("click",function(){Nav.close()})},close:function(a){$overlay.removeClass("open"),$wrapper.removeClass("overlay-open"),$body.removeClass("noscroll"),$positions.find("> div").removeClass("active"),Mousetrap.unbind("esc"),window.location.hash.indexOf("#!/positions/")>-1&&!a&&(Modernizr.history?history.pushState({},"","#!/positions"):window.location.href="#!/positions"),$wrapper.off("click")},isOpen:function(){return $overlay.hasClass("open")?!0:!1}},Nav={toggle:function(){var a=$(".menu-toggle");a.hasClass("active")?$("nav").removeClass("open"):($("nav").addClass("open"),$(window).width()<480&&window.scrollTo(0,0)),$("body").toggleClass("nav-open"),setTimeout(function(){a.toggleClass("active")},250)},close:function(){var a=$(".menu-toggle");$("nav").removeClass("open"),a.removeClass("active"),$("body").removeClass("nav-open")},open:function(){var a=$(".menu-toggle");$("nav").addClass("open"),$(window).width()<480&&window.scrollTo(0,0),a.addClass("active"),$("body").addClass("nav-open")}};jQuery.fn.extend({scrollToAnchor:function(a,b){var c=this;if(!b)var b=500;if(!a)var a=0;$("html,body").animate({scrollTop:c.offset().top-45},b)}}),jQuery.fn.extend({sticky:function(){var a=$(this).offset().top,b=$(this).offset().left,c=$(this).width();$(window).scrollTop();var e=$(this);e.clone().appendTo("body").attr("id","fixed-item").attr("style","position:fixed;top:"+a+";left:"+b+"px;width:"+c+"px"),$(window).on("scroll",function(){$(window).scrollTop()>a?e.attr("style","position:fixed;top:"+a+";left:"+b+"px;width:"+c+"px"):e.attr("style","")})}}),$("body").on("click",".google-form input[type=submit]",function(){$(".form-thank-you").show()}),$("body").on("click","button.form-dismiss",function(){$(".form-thank-you").hide()});var aboutAnimations;!function(a){var b=-1,c=-1,d=function(a){return parseFloat(a)||0},e=function(b){var c=null,e=[];return a(b).each(function(){var b=a(this),f=b.offset().top-d(b.css("margin-top")),g=0<e.length?e[e.length-1]:null;null===g?e.push(b):1>=Math.floor(Math.abs(c-f))?e[e.length-1]=g.add(b):e.push(b),c=f}),e},f=function(b){var c={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof b?a.extend(c,b):("boolean"==typeof b?c.byRow=b:"remove"===b&&(c.remove=!0),c)},g=a.fn.matchHeight=function(b){if(b=f(b),b.remove){var c=this;return this.css(b.property,""),a.each(g._groups,function(a,b){b.elements=b.elements.not(c)}),this}return 1>=this.length&&!b.target?this:(g._groups.push({elements:this,options:b}),g._apply(this,b),this)};g._groups=[],g._throttle=80,g._maintainScroll=!1,g._beforeUpdate=null,g._afterUpdate=null,g._apply=function(b,c){var h=f(c),i=a(b),j=[i],k=a(window).scrollTop(),l=a("html").outerHeight(!0),m=i.parents().filter(":hidden");return m.each(function(){var b=a(this);b.data("style-cache",b.attr("style"))}),m.css("display","block"),h.byRow&&!h.target&&(i.each(function(){var b=a(this),c="inline-block"===b.css("display")?"inline-block":"block";b.data("style-cache",b.attr("style")),b.css({display:c,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px"})}),j=e(i),i.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||"")})),a.each(j,function(b,c){var e=a(c),f=0;if(h.target)f=h.target.outerHeight(!1);else{if(h.byRow&&1>=e.length)return e.css(h.property,""),void 0;e.each(function(){var b=a(this),c={display:"inline-block"===b.css("display")?"inline-block":"block"};c[h.property]="",b.css(c),b.outerHeight(!1)>f&&(f=b.outerHeight(!1)),b.css("display","")})}e.each(function(){var b=a(this),c=0;h.target&&b.is(h.target)||("border-box"!==b.css("box-sizing")&&(c+=d(b.css("border-top-width"))+d(b.css("border-bottom-width")),c+=d(b.css("padding-top"))+d(b.css("padding-bottom"))),b.css(h.property,f-c))})}),m.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||null)}),g._maintainScroll&&a(window).scrollTop(k/l*a("html").outerHeight(!0)),this},g._applyDataApi=function(){var b={};a("[data-match-height], [data-mh]").each(function(){var c=a(this),d=c.attr("data-mh")||c.attr("data-match-height");b[d]=d in b?b[d].add(c):c}),a.each(b,function(){this.matchHeight(!0)})};var h=function(b){g._beforeUpdate&&g._beforeUpdate(b,g._groups),a.each(g._groups,function(){g._apply(this.elements,this.options)}),g._afterUpdate&&g._afterUpdate(b,g._groups)};g._update=function(d,e){if(e&&"resize"===e.type){var f=a(window).width();if(f===b)return;b=f}d?-1===c&&(c=setTimeout(function(){h(e),c=-1},g._throttle)):h(e)},a(g._applyDataApi),a(window).bind("load",function(a){g._update(!1,a)}),a(window).bind("resize orientationchange",function(a){g._update(!0,a)})}(jQuery);